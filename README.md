# Lisp-JS

Lisp-JS is a JavaScript interpreter written entirely in Common Lisp. This project is very much in progress and won't encapsulate all of JavaScript, but it will eventually have much of the language's major functionality (you can think of it like a mini-NodeJS). 

## Finished

### Lexer

The lexer converts a string into a list of tokens that will be used by the parser. The main lexer functionality is contained in src/tokenizer.lisp, although it also uses functions from src/js-convert.lisp.

## TODO

### Parser

The parser is the next major component of this project I have to complete. I plan on implementing a Pratt parser, but haven't worked out the specifics yet.

The parser will be based on the following context-free grammar (will be updated as I add more functionality):

```
Program    -> Stmtlist $
Stmtlist   -> Stmt; Stmtlist
           |  Stmt newline Stmtlist
Stmt       -> AssignStmt
           |  Expr
AssignStmt -> identifier = Expr
Expr       -> BopExpr
           |  UopExpr
           |  FuncExpr
           |  CallExpr
           |  ObjExpr
           |  AccessExpr
           |  IdentExpr
           |  Value
BopExpr    -> Expr Bop Expr
UopExpr    -> Uop Expr
FuncExpr   -> function ( Identlist ) { Stmtlist }
           |  function identifier ( Identlist ) { Stmtlist }
           |  ( Identlist ) => { Stmtlist }
CallExpr   -> identifier ( Exprlist )
ObjExpr    -> { Fieldlist }
AccessExpr -> Expr . identifier
IdentExpr  -> identifier
Value      -> number
           |  string
           |  boolean
           |  undefined
Identlist  -> identifier , Identlist
           |  identifier
Fieldlist  -> Field , Fieldlist
           |  Field
Field      -> identifier : Expr
```

### Evaluator

This piece of the program will evaluate the abstract syntax tree generated by the parser.

### User-Friendly Program

So far, this project is difficult and unintuitive to run. This portion of my project aims to fix that by providing a NodeJS-like program that can run a .js file or act as a command-line environment for JavaScript.

## How to use

This project is formulated as an ASDF-based system (i.e. package) for Common Lisp. In order to run it, you must have SBCL and Quicklisp installed. If so, you can clone this repository into

```
~/.quicklisp/local-projects
```
or any other location that stores Quicklisp systems.

So far, this system doesn't have any external functions, so to run it you have to load and enter the system (in SBCL) like so:

```
* (ql:quickload :lisp-js)
* (in-package :lisp-js)
```

After that, you can directly run any of the functions contained within the source files. 

## Development Information

This project is being developed on Ubuntu 20.04.6 LTS.

## Credits

Packages in use:
- Alexandria
- CL-PPCRE

Resources I used to figure out Pratt Parsers:
- https://matklad.github.io/2020/04/13/simple-but-powerful-pratt-parsing.html
- https://www.youtube.com/watch?v=qyZQPJYvsGw